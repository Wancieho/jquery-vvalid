/*
 * Project: vValid
 * Description: A jQuery form validation plugin with customisation features
 * Author: https://github.com/Wancieho
 * License: MIT
 * Version: 0.0.3
 * Dependancies: jquery-1.*
 * Date: 05/10/2015
 */
!function(e,t,i,s){"use strict";function n(e){if(this.settings=r,e!==s){for(var t in r)if("object"!=typeof r[t])e[t]!==s&&(this.settings[t]=e[t]);else if(r[t]!==s)for(var i in r[t])e[t]!==s&&e[t][i]!==s&&(this.settings[t][i]=e[t][i]);for(var t in e)if("object"==typeof e[t])for(var i in e[t])this.settings[t][i]===s&&(this.settings[t][i]=e[t][i])}this.events()}function a(e,t){for(var i=!0,s=0;s<e.length;s++)if(-1===t.indexOf(e.charAt(s))){i=!1;break}return i}var r={messages:{required:"This field cannot be empty",alphaNumeric:"This field requires an alphanumeric value",alphaNumericSpecial:"This field must include at least 1 number, 1 letter and 1 special character",numeric:"This field requires a numeric value",decimal:"This field requires a numeric decimal value",min:"This field has a minimum length of ",max:"This field has a maximum length of ",exact:"This field must be the exact length of ",email:"A valid email address is required",phoneNumber:"A valid phone number is required",idNumber:"A valid ID number is required",match:"This field value must match the value of ",date:"A valid date format is expected (YYYY-MM-DD)",datetime:"A valid date format is expected (YYYY-MM-DD HH:MM:SS)"},customMethods:{},regex:{date:/^\d{4}-(1[0-2]|0[1-9])-(3[01]|[1,2][0-9]|0\d)$/,datetime:/^\d{4}-(1[0-2]|0[1-9])-(3[01]|[1,2][0-9]|0\d)\s[0-2]?[0-9]:[0-5][0-9]:[0-5][0-9]$/},displayStyling:!0,displayText:!0};e.extend(n.prototype,{events:function(){var t=this,i=e("*[data-vvalid]").eq(0).closest("form");e.each(i.find("*[data-vvalid]"),function(i,s){if(e(s).on("blur",function(){setTimeout(function(){t.validate(s)},200)}),e(s).on("keyup, change",function(){setTimeout(function(){t.validate(s)},200)}),""!==e(s).val()&&t.validate(s),"function"==typeof MutationObserver){var n=new MutationObserver(function(e){t.validate(s)}.bind(this));n.observe(e(s).get(0),{characterData:!0,childList:!0})}}),i.on("submit",function(s){var n=!0;e.each(i.find("*[data-vvalid]"),function(e,i){t.validate(i)||(n=!1)}),i.trigger("submitting"),n?(this.submit(),i.trigger("submitted")):(s.preventDefault(),i.trigger("invalid"))})},validate:function(t){if(e(t).attr("data-vvalid")&&"disabled"!==e(t).attr("disabled")){var i=Array(),n=e(t).attr("data-vvalid").split("|"),a=Array();for(var r in n){var d=n[r].split(":"),l=d[0],u="";if(a.push(l),d.length>1&&(u=d[1]),this[l]!==s||this.settings.customMethods[l]!==s){var o=e(t)[0].value!==s?e(t).clone().children().remove().end().val():e(t).clone().children().remove().end().text();if(this[l]!==s)var h=this[l](o,u);else if(this.settings.customMethods[l]!==s)var h=this.settings.customMethods[l](o,u);""!==h&&h!==s&&i.push({type:l,text:h})}}if(this.errorsGenerate(t,i),i.length>0)return!1}return!0},errorsGenerate:function(t,i){var s=e(t).siblings(".errors").find("div").length;if(e(t).removeClass("error").siblings(".errors").remove(),i.length>0&&(this.settings.displayStyling&&e(t).addClass("vValid error"),this.settings.displayText||"true"===e(t).attr("data-vvalid-error-text"))){e(t).parent().append('<div class="errors">');for(var n in i)e(t).siblings(".errors").append('<div class="text-error">'+i[n].text+"</div>")}0===s&&e(t).siblings(".errors").hide(),s<i.length&&e(t).siblings(".errors").slideDown(100)},required:function(e){return 0===e.length?this.settings.messages.required:void 0},alphaNumeric:function(e){return/(?=.*\d)(?=.*[a-zA-Z]).*$/.test(e)?void 0:this.settings.messages.alphaNumeric},alphaNumericSpecial:function(e){return/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\[\]<>\\/|{}\-\?\=,])[A-Za-z\d!@#$%^&*()_+]/.test(e)?void 0:this.settings.messages.alphaNumericSpecial},numeric:function(e){return/^[0-9]*$/.test(e)&&""!==e?void 0:this.settings.messages.numeric},decimal:function(e){return/^\d*\.?\d*$/.test(e)&&""!==e?void 0:this.settings.messages.decimal},min:function(e,t){return e.length<parseInt(t)?this.settings.messages.min+t:void 0},max:function(e,t){return e.length>parseInt(t)?this.settings.messages.max+t:void 0},exact:function(e,t){return e.length!==parseInt(t)?this.settings.messages.exact+t:void 0},idNumber:function(e){return e.length<13||e.length>13?this.settings.messages.idNumber:void 0},match:function(t,i){return t!==e('input[name="'+i+'"]').val()?this.settings.messages.match+i:void 0},date:function(e){return this.settings.regex.date.test(e)?void 0:this.settings.messages.date},datetime:function(e){var t=new Date(e);return!this.settings.regex.datetime.test(e)||!t instanceof Date?this.settings.messages.datetime:void 0},email:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?void 0:this.settings.messages.email},phoneNumber:function(e){return(e.match(/\+/g)||[]).length>1||e.indexOf("+")>0||e.length<10||e.length>14||!a(e,"+0123456789")?this.settings.messages.phoneNumber:void 0}}),e.vValid=function(e){this.validate===s&&(this.validate=new n(e))},e.extend(e.vValid,{destroy:function(){delete this.validate}})}(jQuery,window,document);